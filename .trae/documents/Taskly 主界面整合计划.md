## 实现计划

### 1. 修改 `main.rkt`
- **移除启动时的强制数据库选择**：直接创建主窗口，不先显示数据库选择对话框
- **保持应用启动流程**：确保应用能直接启动到主界面

### 2. 修改 `gui/main-frame.rkt`
- **添加菜单系统**：
  - 文件菜单：新建数据库、打开数据库、关闭数据库
  - 帮助菜单：关于（显示版本号）
- **数据库连接管理**：
  - 添加数据库连接状态跟踪
  - 实现打开、新建、关闭数据库的功能
  - 处理数据库连接错误
- **首次启动处理**：
  - 初始状态显示友好提示："欢迎使用 Taskly！请创建或打开数据库文件"
  - 在未连接数据库时禁用需要数据库的功能

### 3. 修改 `gui/task-panel.rkt`
- **添加初始状态显示**：
  - 在未连接数据库时显示欢迎信息和操作指引
  - 连接数据库后显示正常的任务列表

### 4. 修改 `gui/sidebar.rkt`
- **状态感知**：
  - 在未连接数据库时禁用列表相关功能
  - 连接数据库后恢复正常功能

### 5. 核心功能实现
- **文件菜单**：
  - 新建数据库：显示对话框让用户选择路径和名称，创建并连接
  - 打开数据库：显示文件选择对话框，连接选中的数据库
  - 关闭数据库：关闭当前连接，返回初始状态
- **帮助菜单**：
  - 关于：显示包含版本号（V1.0.0）的对话框

### 6. 首次启动体验优化
- **清晰的视觉提示**：在主界面中央显示欢迎信息和操作指引
- **便捷的操作入口**：菜单项和主界面提示都引导用户创建/打开数据库
- **平滑的状态切换**：从初始状态到数据库连接状态的无缝过渡

### 7. 界面优化
- 确保所有控件使用 racket/gui 原生组件
- 保持跨平台一致性
- 在不同状态下显示相应的界面内容

### 8. 测试
- 测试首次启动时的界面显示
- 测试数据库连接和断开功能
- 测试菜单功能
- 测试版本号显示

## 实现要点
- 所有修改将使用 racket/gui 原生功能，不引入额外依赖
- 保持极简设计风格，与现有界面保持一致
- 确保在未连接数据库时界面状态正确，功能禁用合理
- 实现友好的错误处理
- 提供清晰的用户引导，特别是首次使用时

这个计划将确保 Taskly 应用具有类似 macOS Reminder 的单主界面设计，同时为首次使用的用户提供良好的引导体验，保持跨平台兼容性和系统原生控件外观。