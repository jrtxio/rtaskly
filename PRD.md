## 1. 产品概述
- **产品名称**：Taskly
- **版本号**：V1.0.0 (MVP)
- **创建日期**：2025 年 11 月 28 日
- **面向用户**：追求数据安全和极简体验的技术爱好者 / Racket 开发者
- **核心价值**：
    1. 完全本地化，用户掌控数据
    2. 极简界面，专注任务管理
    3. 跨平台一致性（依赖用户自选同步工具）

## 2. 用户需求

- **痛点**：
    - 云端依赖，数据不安全
    - 功能冗余、界面杂乱
    - 操作复杂，影响效率
- **用户需求**：
    1. 自由选择或创建本地数据文件（SQLite）
    2. 创建、编辑、删除任务和任务列表
    3. 按日期、完成状态和自定义列表筛选任务
    4. 极简、直观、快速操作界面

## 3. 技术选型

| 领域     | 技术/方案      | 备注                             |
| ------ | ---------- | ------------------------------ |
| 开发语言   | Racket     | 核心开发语言                         |
| GUI 界面 | racket/gui | 界面参考 macOS Reminder 风格         |
| 数据存储   | SQLite     | 用户自定义路径，本地文件                   |
| 数据同步   | 无内置        | 可依赖第三方同步工具（Dropbox / iCloud 等） |

## 4. 核心功能

### 4.1 数据文件管理

- **首次启动**：选择或创建 SQLite 文件
- **创建仓库**：输入名称和路径 → 创建文件 → 打开主界面

### 4.2 主界面布局

- **左侧菜单栏（侧边栏）**
    - 搜索框：输入关键字，右侧任务展示区域切换到搜索结果
    - 智能列表：今天 / 计划 / 全部 / 完成
    - 我的列表：自定义列表，右击可重命名或删除（需二次确认）
    - 底部按钮：「+ 添加列表」 → 弹出添加新列表对话框
- **右侧任务展示区**
    - 标题栏：显示当前选中列表名称
    - 创建任务：底部「+ 新提醒事项」或点击空白处 → 弹出修改提醒对话框
    - 任务项：分割线分隔，包含复选框（标记完成）、任务文本、截止日期
    - 编辑任务：单击任务项 → 弹出修改提醒对话框

### 4.3 对话框与操作

|界面|触发|核心元素|确认/取消行为|
|---|---|---|---|
|修改列表|右击列表 → 重命名|列表名称输入框|确定：保存更新；取消：关闭|
|添加新列表|点击侧边栏「+ 添加列表」|列表名称输入框|确定：创建并选中列表；取消：关闭|
|修改提醒（任务详情）|点击任务项 / 「+ 新提醒事项」|任务文本输入框、截止日期选择器、列表下拉|确定：保存或创建任务；取消：放弃修改|

## 5. 数据模型（SQLite）

### 5.1 任务列表表 (`list`)

|字段名|类型|约束|描述|
|---|---|---|---|
|list_id|INTEGER|PRIMARY KEY|列表唯一ID|
|list_name|TEXT|NOT NULL|列表名称|

### 5.2 任务事项表 (`task`)

|字段名|类型|约束|描述|
|---|---|---|---|
|task_id|INTEGER|PRIMARY KEY|任务唯一ID|
|list_id|INTEGER|NOT NULL (FK: list.list_id)|所属列表ID|
|task_text|TEXT|NOT NULL|任务描述|
|due_date|TEXT|NULL|截止日期 YYYY-MM-DD|
|is_completed|INTEGER (0/1)|NOT NULL, DEFAULT 0|是否完成|
|created_at|TEXT|NOT NULL|创建时间|

## 6. 未来优化（V1.1）

1. **行内编辑**：双击任务直接修改，无需弹窗
2. **快捷创建任务**：行内快速创建，无需弹出对话框
3. **键盘快捷键**：Enter 保存，Delete 删除
4. **列表排序**：拖拽自定义左侧列表顺序

## 7. 成功标准

- 数据文件可自由选择和创建
- 任务与列表增删改查正常
- 完成状态和筛选功能正常
- UI 极简、直观、操作流畅

## 8. V1 明确实现

✅ 本地化存储，用户自选路径  
✅ 任务列表管理（增删改查）  
✅ 截止日期显示与完成状态管理  
✅ 搜索、智能筛选（今天 / 计划 / 全部 / 完成）  
✅ 跨平台支持

### 排除功能

❌ 内置云同步  
❌ 高级提醒或通知  
❌ 高级排序/标签/共享功能

## 9. 实现步骤

1. 数据文件选择或创建功能
2. SQLite 数据表初始化
3. 主界面布局（左侧菜单 + 右侧任务区）
4. 任务列表增删改查
5. 任务增删改查
6. 搜索和筛选功能
7. UI 交互优化、测试和跨平台验证